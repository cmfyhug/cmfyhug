<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Your Cart - CMFY</title>
<style>
body { font-family: Arial, sans-serif; background:#f7f7f7; margin:0; padding:0; }
.wrap { max-width:900px; margin:0 auto; background:#fff; border-radius:12px; box-shadow:0 2px 10px rgba(0,0,0,.08); padding:20px; margin-top:20px; }
h1 { text-align:center; margin-bottom:20px; }

/* Navbar */
.navbar {
  display:flex; justify-content:space-between; align-items:center;
  padding:12px 20px; background:#fff; box-shadow:0 2px 8px rgba(0,0,0,.1);
  position:sticky; top:0; z-index:1000;
}
.navbar .logo { font-weight:bold; font-size:20px; color:#000; text-decoration:none; }
.navbar .links a {
  margin-left:12px; text-decoration:none; color:#000; font-weight:600; transition: color 0.3s;
}
.navbar .links a:hover { color:#ff4081; }
#cart-count { background:red; color:#fff; font-size:12px; width:18px; height:18px;
  border-radius:50%; display:inline-flex; align-items:center; justify-content:center; margin-left:5px; }

/* Cart items */
.item { display:flex; align-items:center; gap:12px; padding:12px 0; border-bottom:1px solid #eee; }
.item img { width:80px; height:80px; object-fit:cover; border-radius:10px; }
.info { flex:1; }
.name { font-weight:bold; margin-bottom:4px; }
.meta { font-size:14px; color:#555; }
.price { font-weight:bold; margin-top:6px; }
.qty { display:flex; align-items:center; gap:6px; margin-top:6px; }
.qty button { width:28px; height:28px; font-size:18px; cursor:pointer; border:none; border-radius:6px; background:#eee; }
.remove { cursor:pointer; color:#c00; font-weight:bold; font-size:18px; padding:6px 10px; }

/* Total & checkout form */
.tot { text-align:right; font-weight:bold; font-size:18px; margin-top:10px; }
.order-form { margin-top:20px; background:#fafafa; padding:16px; border-radius:8px; border:1px solid #eee; }
.order-form h3 { margin-top:0; }
.order-form label { display:block; margin:8px 0 6px; font-weight:600; }
.order-form input, .order-form select { width:100%; padding:10px; border-radius:6px; border:1px solid #ccc; box-sizing:border-box; }
.order-form .small { width:48%; display:inline-block; box-sizing:border-box; }
.order-form .small + .small { margin-left:4%; }
.confirm-btn { margin-top:12px; background:green; color:#fff; border:none; padding:12px; width:100%; border-radius:8px; cursor:pointer; font-weight:700; }
.confirm-btn:hover { background:darkgreen; }

.empty { text-align:center; padding:30px 0; color:#666; }

/* Responsive */
@media(max-width:768px){ .item { flex-direction:column; align-items:flex-start; } }
</style>
</head>
<body>

<div class="navbar">
  <div class="logo"><a href="index.html">CMFY</a></div>
  <div class="links">
    <a href="index.html">Home</a>
    <a href="shop.html">Shop</a>
    <a href="cart.html">Cart <span id="cart-count">0</span></a>
  </div>
</div>

<div class="wrap">
  <h1>Your Cart 🛒</h1>
  <div id="list"></div>
  <div class="tot">Total: <span id="total">0</span> DZD</div>

  <div class="order-form">
    <h3>Delivery Information</h3>
    <form id="orderForm">
      <label for="fname">First Name</label>
      <input id="fname" name="fname" type="text" required>

      <label for="lname">Last Name</label>
      <input id="lname" name="lname" type="text" required>

      <label for="phone">Phone Number</label>
      <input id="phone" name="phone" type="tel" required>

      <label for="wilaya">Wilaya</label>
      <select id="wilaya" name="wilaya" required>
        <option value="">Select Wilaya</option>
        <option>Algiers</option>
        <option>Oran</option>
        <option>Constantine</option>
        <option>Annaba</option>
        <option>Blida</option>
        <!-- أضف باقي الولايات حسب الحاجة -->
      </select>

      <label for="delivery">Delivery</label>
      <select id="delivery" name="delivery" required>
        <option value="">Choose</option>
        <option value="home">Home</option>
        <option value="office">Office</option>
      </select>

      <div id="addressBlock" style="display:none;">
        <label for="address">Address</label>
        <input id="address" name="address" type="text">
      </div>

      <button class="confirm-btn" type="submit">Place Order</button>
    </form>
  </div>
</div>

<script>
// Elements
const list = document.getElementById('list');
const totalEl = document.getElementById('total');
const cartCount = document.getElementById('cart-count');

// Render cart
function render(){
  const cart = JSON.parse(localStorage.getItem('cart'))||[];
  list.innerHTML = '';
  if(cart.length===0){
    list.innerHTML='<div class="empty">Your cart is empty.</div>';
    totalEl.textContent='0';
    return;
  }
  let total=0;
  cart.forEach((item,i)=>{
    total += item.price * (item.qty||1);
    const row = document.createElement('div');
    row.className='item';
    row.innerHTML=`
      <img src="${item.img}" alt="${item.name}">
      <div class="info">
        <div class="name">${item.name}</div>
        <div class="meta">Size: ${item.size} • Color: ${item.color}</div>
        <div class="price">${item.price * (item.qty||1)} DZD</div>
        <div class="qty">
          <button class="dec" data-i="${i}">-</button>
          <span>${item.qty||1}</span>
          <button class="inc" data-i="${i}">+</button>
        </div>
      </div>
      <div class="remove" data-i="${i}">✖</div>
    `;
    list.appendChild(row);
  });
  totalEl.textContent = total;
  cartCount.textContent = cart.reduce((acc,it)=>acc+(it.qty||1),0);
}

// Cart actions
document.addEventListener('click', e=>{
  let cart = JSON.parse(localStorage.getItem('cart'))||[];
  if(e.target.matches('.inc')){
    const i=Number(e.target.dataset.i);
    cart[i].qty = (cart[i].qty||1)+1;
  }
  if(e.target.matches('.dec')){
    const i=Number(e.target.dataset.i);
    cart[i].qty = (cart[i].qty||1)-1;
    if(cart[i].qty<=0) cart.splice(i,1);
  }
  if(e.target.matches('.remove')){
    const i=Number(e.target.dataset.i);
    cart.splice(i,1);
  }
  localStorage.setItem('cart',JSON.stringify(cart));
  render();
});

// Show/hide address field
document.getElementById('delivery').addEventListener('change', function(){
  document.getElementById('addressBlock').style.display = this.value==='home' ? 'block':'none';
});

// Place order
document.getElementById('orderForm').addEventListener('submit', e=>{
  e.preventDefault();
  const delivery = document.getElementById('delivery').value;
  const address = document.getElementById('address').value.trim();
  if(delivery==='home' && address===''){
    alert('Please enter your address for Home delivery.');
    return;
  }
  const order = {
    fullName: document.getElementById('fname').value + ' ' + document.getElementById('lname').value,
    phone: document.getElementById('phone').value,
    wilaya: document.getElementById('wilaya').value,
    delivery,
    address,
    cart: JSON.parse(localStorage.getItem('cart'))||[],
    total: totalEl.textContent
  };
  console.log('Order data:', order);
  alert('Your order has been placed successfully! ✅');
  localStorage.removeItem('cart');
  render();
  e.target.reset();
  document.getElementById('addressBlock').style.display='none';
});

// Initial render
render();
</script>

</body>
</html>
