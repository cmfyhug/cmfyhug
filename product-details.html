<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Product Details</title>
<style>
body { font-family: Arial, sans-serif; background:#f4f4f4; margin:0; }

/* Navbar */
.navbar {
  display:flex; justify-content:space-between; align-items:center;
  padding:12px 20px; background:#fff;
  box-shadow:0 2px 8px rgba(0,0,0,.1); position:sticky; top:0; z-index:1000;
}
.navbar .logo a { text-decoration:none; font-weight:bold; font-size:20px; color:#000; }
.navbar .links a { margin-left:14px; text-decoration:none; font-weight:600; color:#000; transition:.3s; }
.navbar .links a:hover { color:#ff4081; }
#cart-count, #wish-count {
  background:red; color:#fff; font-size:12px; width:18px; height:18px;
  border-radius:50%; display:inline-flex; align-items:center; justify-content:center; margin-left:4px;
}

/* Product card */
.wrap { max-width:700px; margin:20px auto; background:#fff; border-radius:14px;
  box-shadow:0 3px 12px rgba(0,0,0,.08); padding:22px; }
.img { width:100%; height:360px; object-fit:contain; border-radius:10px; background:#fafafa; }
h1 { font-size:24px; margin:14px 0 6px; }
.price { font-size:20px; font-weight:bold; margin-bottom:12px; color:#ff4081; }

.stars { color:#FFD700; margin:8px 0; font-size:18px; }

.row { margin:12px 0; }
select { width:100%; padding:10px; border-radius:8px; border:1px solid #ccc; }

.btn { width:100%; background:#000; color:#fff; border:none;
  padding:14px; border-radius:10px; cursor:pointer; margin-top:14px; font-size:16px; transition:.3s; }
.btn:hover { background:#444; }
.btn.wish { background:#ff4081; margin-top:10px; }
.btn.wish:hover { background:#e91e63; }

.back { display:inline-block; margin-bottom:14px; text-decoration:none; color:#000; font-weight:600; }

/* Notify */
#notify { position:fixed; top:20px; right:20px; background:#000; color:#fff;
  padding:14px 20px; border-radius:10px; box-shadow:0 4px 12px rgba(0,0,0,.2);
  display:none; font-weight:600; z-index:10000; }
</style>
</head>
<body>

<!-- Navbar -->
<div class="navbar">
  <div class="logo"><a href="index.html">CMFY</a></div>
  <div class="links">
    <a href="index.html">Home</a>
    <a href="shop.html">Shop</a>
    <a href="wishlist.html">Wishlist <span id="wish-count">0</span></a>
    <a href="cart.html">Cart <span id="cart-count">0</span></a>
  </div>
</div>

<div class="wrap">
  <a class="back" href="shop.html">← Back to shop</a>
  <img id="pimg" class="img" src="" alt="">
  <h1 id="pname"></h1>
  <div class="stars">★★★★★</div>
  <div class="price" id="pprice"></div>

  <div class="row"><strong>Size:</strong> Standard</div>

  <div class="row">
    <label for="color"><strong>Color:</strong></label>
    <select id="color"></select>
  </div>

  <button class="btn" id="addBtn">Add to Cart</button>
  <button class="btn wish" id="wishBtn">Add to Wishlist</button>
</div>

<div id="notify"></div>

<script>
const PRODUCTS=[
  {id:1,name:"Hoodie pink",price:3500,img:"d.jpg",colors:["Pink","White","Black"]},
  {id:2,name:"Jogging brawn",price:4200,img:"a.jpg",colors:["Brown","Beige","Black"]}
];

const q=new URLSearchParams(location.search);
const id=Number(q.get('id'));
const p=PRODUCTS.find(x=>x.id===id);
const notify=document.getElementById('notify');

if(!p){
  document.body.innerHTML="<p style='text-align:center'>Product not found.</p>";
}else{
  document.getElementById('pimg').src=p.img;
  document.getElementById('pname').textContent=p.name;
  document.getElementById('pprice').textContent=p.price+" DZD";

  const colorSel=document.getElementById('color');
  colorSel.innerHTML=p.colors.map(c=>`<option value="${c}">${c}</option>`).join('');

  document.getElementById('addBtn').addEventListener('click',()=>{
    const color=colorSel.value;
    let cart=JSON.parse(localStorage.getItem('cart'))||[];
    cart.push({id:p.id,name:p.name,price:p.price,img:p.img,size:"Standard",color:color,qty:1});
    localStorage.setItem('cart',JSON.stringify(cart));
    showNotify(`${p.name} (${color}) added to cart!`);
    updateCartCount();
  });

  document.getElementById('wishBtn').addEventListener('click',()=>{
    let wish=JSON.parse(localStorage.getItem('wishlist'))||[];
    if(!wish.find(item=>item.id===p.id)){
      wish.push({id:p.id,name:p.name,price:p.price,img:p.img});
      localStorage.setItem('wishlist',JSON.stringify(wish));
      showNotify(`${p.name} added to wishlist!`);
      updateWishCount();
    }else{
      showNotify(`${p.name} already in wishlist!`);
    }
  });
}

function showNotify(msg){
  notify.textContent=msg;
  notify.style.display='block';
  setTimeout(()=>{ notify.style.display='none'; },2000);
}

function updateCartCount(){
  const count=JSON.parse(localStorage.getItem('cart'))?.length||0;
  document.getElementById('cart-count').textContent=count;
}
function updateWishCount(){
  const count=JSON.parse(localStorage.getItem('wishlist'))?.length||0;
  document.getElementById('wish-count').textContent=count;
}
updateCartCount();
updateWishCount();
</script>

</body>
</html>
