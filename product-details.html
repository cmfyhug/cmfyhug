<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Product Details</title>
<style>
body { font-family: Arial, sans-serif; background:#f4f4f4; padding:20px; margin:0; }
.wrap { max-width:620px; margin:0 auto; background:#fff; border-radius:12px; box-shadow:0 2px 10px rgba(0,0,0,.08); padding:18px; }
.img { width:100%; height:360px; object-fit:contain; border-radius:10px; background:white; }
h1 { font-size:22px; margin:12px 0 6px; }
.price { font-weight:bold; margin-bottom:14px; }
.row { margin:10px 0; }
select { width:100%; padding:10px; border-radius:8px; border:1px solid #ccc; }
.btn { width:100%; background:#000; color:#fff; border:none; padding:12px; border-radius:8px; cursor:pointer; margin-top:12px; transition: all 0.3s; }
.btn:hover { background:#444; }
.back { display:inline-block; margin-bottom:12px; text-decoration:none; color:#000; }

#notify { position:fixed; top:20px; right:20px; background:#000; color:#fff; padding:12px 18px; border-radius:8px; box-shadow:0 4px 12px rgba(0,0,0,.2); display:none; font-weight:600; z-index:10000; }
</style>
</head>
<body>

<div class="wrap">
  <a class="back" href="shop.html">← Back to shop</a>
  <img id="pimg" class="img" src="" alt="">
  <h1 id="pname"></h1>
  <div class="price" id="pprice"></div>

  <div class="row"><strong>Size:</strong> Standard</div>

  <div class="row">
    <label for="color"><strong>Color:</strong></label>
    <select id="color"></select>
  </div>

  <button class="btn" id="addBtn">Add to Cart</button>
</div>

<div id="notify"></div>

<script>
const PRODUCTS=[
  {id:1,name:"Hoodie pink",price:3500,img:"d.jpg",colors:["Pink","White","Black"]},
  {id:2,name:"Jogging brawn",price:4200,img:"a.jpg",colors:["Brown","Beige","Black"]}
];

const q=new URLSearchParams(location.search);
const id=Number(q.get('id'));
const p=PRODUCTS.find(x=>x.id===id);
const notify=document.getElementById('notify');

if(!p){
  document.body.innerHTML="<p style='text-align:center'>Product not found.</p>";
}else{
  document.getElementById('pimg').src=p.img;
  document.getElementById('pname').textContent=p.name;
  document.getElementById('pprice').textContent=p.price+" DZD";

  const colorSel=document.getElementById('color');
  colorSel.innerHTML=p.colors.map(c=>`<option value="${c}">${c}</option>`).join('');

  document.getElementById('addBtn').addEventListener('click',()=>{
    const color=colorSel.value;
    let cart=JSON.parse(localStorage.getItem('cart'))||[];
    cart.push({id:p.id,name:p.name,price:p.price,img:p.img,size:"Standard",color:color,qty:1});
    localStorage.setItem('cart',JSON.stringify(cart));
    showNotify(`${p.name} (${color}) added to cart!`);
    updateCartCount();
  });
}

// تنبيه صغير يظهر ويختفي
function showNotify(msg){
  notify.textContent=msg;
  notify.style.display='block';
  setTimeout(()=>{ notify.style.display='none'; },2000);
}

// تحديث عداد السلة في Navbar إذا موجود
function updateCartCount(){
  const span=document.getElementById('cart-count-nav');
  if(span) span.textContent=JSON.parse(localStorage.getItem('cart'))?.length||0;
}
updateCartCount();
</script>

</body>
</html>
